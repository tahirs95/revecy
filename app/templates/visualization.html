<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/style.css">
    
    <title>Revecy</title>
</head>
<body>
    <div class="bg-clr">
        <div class="revecy pt-3">
            <nav class="navbar navbar-expand-lg navbar-dark navbar-light px-0">
                <a class="navbar-brand" href="#"><img src="/static/images/logo-header.png" alt=""></a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav ml-auto text-center">
                        <li class="nav-item mr-5">
                            <a class="nav-link text-white" href="#contact">Contact</a>
                        </li>
                        <li class="nav-item mr-5">
                            <a class="nav-link text-white" href="#">Blog</a>
                        </li>
                        <li class="nav-item mr-5">
                            <a class="nav-link text-white" href="#">SBI</a>
                        </li>
                        <li class="nav-item mr_custom">
                            <a class="nav-link" href="https://www.linkedin.com/in/revecy-consulting-37432b1b5/"><img class="icon2" src="/static/images/linkedin.png" ></a>
                        </li>
                        <li class="nav-item mr_custom">
                            <a class="nav-link" href="https://twitter.com/Revecy2"><img class="icon2" src="https://p10cdn4static.sharpschool.com/UserFiles/Servers/Server_208743/Image/twitter2.png" ></a>
                                                    </li>
                        <li class="nav-item mr_custom">
                            <a class="nav-link" href="https://www.instagram.com/revecyconsulting"><img class="icon2" src="https://www.nicepng.com/png/full/47-475136_contact-instagram-icon.png" ></a>
                                <!-- <img class="icon" src="" >
                                <img class="icon" src="" > -->
                        </li>
                        
                    </ul>
                </div>
            </nav>
        </div>
        
        <div class="revecy banner py-5">
            <div class="row">
                <div class="col-lg-6 col-md-6 col-sm-12 bannerleft d-flex align-items-center">
                    <div>
                        <h1 class="text-white">Simple Business<br> Insights</h1>
                    <div class="w-100">
                        <p class="mt-3 display-4 text-white">Breathe life into your data in minutes and ponder on the real problem
                        </p>
                    </div>
                    <button class="btn btn-lg mt-5 text-white  btn-outline-light" onclick="window.location.href='/#contact'">Learn More</button>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-12 bannerright d-flex justify-content-end">
                    <div class="bannerimg w-75 pt-3 pb-3">
                        <img src="/static/images/banner-icons.jpg" class="w-100" alt="">
                    </div>
                </div>
            </div>
        </div>

        <div class="bridging-perception py-5">
            <div class="row ml-2">
                <div class="col-lg-12">
                    <div class="analyze">
                        <img class="" src="/static/images/analyze-icon.jpg">
                        <h2>Analyze</h2>
                    </div>
                </div>
            </div>
            <div class="row revecy mt-5">
                <div class="col-lg-4 d-flex justify-content-center mt-3">
                    <div class="button">
                        <button type="button" class="btn" id="file_btn">Get Data</button>
                        <form method="post" action="/visualization" id="form" enctype="multipart/form-data">    
                            {% csrf_token %}   
                            <input type ="text" name="file_name" id="random_name" style="display:none">                  
                            <input type="file" id="theFile" name="csv_file" accept=".csv"/>
                        </form>
                        <div class="icon">
                            <img src="/static/images/right-arrow.jpg">
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 d-flex justify-content-center mt-3">
                    <div class="button">
                        <button type="button" class="btn">Try Sample</button>
                        <div class="icon">
                            <img src="/static/images/right-arrow.jpg">
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 d-flex justify-content-center mt-3">
                    <div class="button">
                        <button id="mapButton" type="button" class="btn">Map Data</button>
                        <div class="icon">
                            <img src="/static/images/right-arrow.jpg">
                        </div>
                    </div>
                </div>
            </div>
            <!-- Table-->
            <div class="row revecy mt-5">
                <div id="mapData">
                    <form action = "javascript:;" id="add_map_data_row_form">
                        <div class="row select-options">
                            <div class="col-lg-6 mb-5">
                                <label class="select-name">Select Field</label>
                                <div class="select">
                                    <select name="select_field" id="slct_field" required>
                                    </select>
                                </div>
                            </div>
                            <div class="col-lg-6 mb-5">
                                <label class="select-name">Select Type</label>
                                <div class="select">
                                    <select name="select_type" id="slct_type" required>
                                        <option value="Full Address">Full Address</option>
                                        <option value="ZipCode">ZipCode</option>
                                        <option value="City">City</option>
                                        <option value="State">State</option>
                                        <option value="Country">Country</option>
                                        <option value="Continent">Continent</option>
                                        <option value="URL">URL</option>
                                        <option value="Date">Date</option>
                                        <option value="Family">Family</option>
                                    </select>
                                </div>
                            </div>
                            <!-- <div class="col-lg-4 mb-5">
                                <label class="select-name">Transformation</label>
                                <div class="select">
                                    <select name="select_transformation" id="slct_transformation" required>
                                        <option selected disabled>Choose an option</option>
                                        <option value="Transformation 1">Option 1</option>
                                        <option value="Transformation 2">Option 2</option>
                                        <option value="Transformation 3">Option 3</option>
                                    </select>
                                </div>
                            </div> -->
                            <div class="col-lg-12 text-center">
                                <button type="submit" class="btn btn-primary border-0 mb-4">Add Data</button>
                            </div>
                        </div>
                    </form>
                    <div class="blue-table-scroll" id="style-scroll">
                        <div class="row">
                            <div class="col-lg-12">
                                <table class="table">
                                    <tbody id="map_data_table">
                                        <tr class="d-flex white-space" >
                                          <td class="filterable-cell">
                                            <div class="alert alert-danger text-center" id="error">You need to select at least two variables in a family</div>
                                          </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <div class="submit">
                                    <button type="button" class="btn" onclick="values_box()">Submit</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="table-scroll">
                    <div class="row">
                        <div class="col-lg-12 d-flex">
                            <table class="table">
                                <thead>
                                <tr class="d-flex white-space" id="table_heading">
                                   
                                </tr>
                                </thead>
                                <tbody id="table_body">
                                <!-- <tr class="d-flex white-space">
                                    <td class="filterable-cell left-data">Data</td>
                                    <td class="filterable-cell middle-data">Data</td>
                                    <td class="filterable-cell right-data">Data</td>
                                    <td class="filterable-cell right-data">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8">Data</td>
                                    <td class="filterable-cell right-data">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8">Data</td>
                                    <td class="filterable-cell right-data">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8 border-bottom-l-r">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8 border-bottom-l-l">Data</td>
                                    <td class="filterable-cell right-data">Data</td>
                                </tr> -->
                                </tbody>
                            </table>

                            <!-- <table class="table ml-12">
                                <thead>
                                <tr class="d-flex white-space">
                                    <th class="left-heading">Field 1</th>
                                    <th class="middle-heading">Field 1</th>
                                    <th class="right-heading">Field 1</th>
                                </tr>
                                </thead>
                                <tbody">
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell left-data">Data</td>
                                    <td class="filterable-cell middle-data">Data</td>
                                    <td class="filterable-cell right-data">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8 border-bottom-l-r">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8 border-bottom-l-l">Data</td>
                                </tr>
                                </tbody>
                            </table>

                            <table class="table ml-12">
                                <thead>
                                <tr class="d-flex white-space">
                                    <th class="left-heading">Field 1</th>
                                    <th class="middle-heading">Field 1</th>
                                    <th class="right-heading">Field 1</th>
                                </tr>
                                </thead>
                                <tbody">
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell left-data">Data</td>
                                    <td class="filterable-cell middle-data">Data</td>
                                    <td class="filterable-cell right-data">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8 border-bottom-l-r">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8 border-bottom-l-l">Data</td>
                                </tr>
                                </tbody>
                            </table>

                            <table class="table ml-12">
                                <thead>
                                <tr class="d-flex white-space">
                                    <th class="left-heading">Field 1</th>
                                    <th class="middle-heading">Field 1</th>
                                    <th class="right-heading">Field 1</th>
                                </tr>
                                </thead>
                                <tbody">
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell left-data">Data</td>
                                    <td class="filterable-cell middle-data">Data</td>
                                    <td class="filterable-cell right-data">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8 border-bottom-l-r">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8 border-bottom-l-l">Data</td>
                                </tr>
                                </tbody>
                            </table>

                            <table class="table ml-12">
                                <thead>
                                <tr class="d-flex white-space">
                                    <th class="left-heading">Field 1</th>
                                    <th class="middle-heading">Field 1</th>
                                    <th class="right-heading">Field 1</th>
                                </tr>
                                </thead>
                                <tbody">
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell left-data">Data</td>
                                    <td class="filterable-cell middle-data">Data</td>
                                    <td class="filterable-cell right-data">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8 border-bottom-l-r">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8 border-bottom-l-l">Data</td>
                                </tr>
                                </tbody>
                            </table>
                            
                            <table class="table ml-12">
                                <thead>
                                <tr class="d-flex white-space">
                                    <th class="left-heading">Field 1</th>
                                    <th class="middle-heading">Field 1</th>
                                    <th class="right-heading">Field 1</th>
                                </tr>
                                </thead>
                                <tbody">
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell left-data">Data</td>
                                    <td class="filterable-cell middle-data">Data</td>
                                    <td class="filterable-cell right-data">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8 border-bottom-l-r">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8 border-bottom-l-l">Data</td>
                                </tr>
                                </tbody>
                            </table>
                            
                            <table class="table ml-12">
                                <thead>
                                <tr class="d-flex white-space">
                                    <th class="left-heading">Field 1</th>
                                    <th class="middle-heading">Field 1</th>
                                    <th class="right-heading">Field 1</th>
                                </tr>
                                </thead>
                                <tbody">
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell left-data">Data</td>
                                    <td class="filterable-cell middle-data">Data</td>
                                    <td class="filterable-cell right-data">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8 border-bottom-l-r">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8 border-bottom-l-l">Data</td>
                                </tr>
                                </tbody>
                            </table>

                            <table class="table ml-12 mr-12">
                                <thead>
                                <tr class="d-flex white-space">
                                    <th class="left-heading">Field 1</th>
                                    <th class="middle-heading">Field 1</th>
                                    <th class="right-heading">Field 1</th>
                                </tr>
                                </thead>
                                <tbody">
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell left-data">Data</td>
                                    <td class="filterable-cell middle-data">Data</td>
                                    <td class="filterable-cell right-data">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8 border-bottom-l-r">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8 border-bottom-l-l">Data</td>
                                </tr>
                                </tbody>
                            </table> -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="revecy py-5 blue-bg">
            <div class="row">
                <div class="col-lg-6">
                    <h2 class="white text-center">File Summary</h2>
                    <div class="d-flex">
                        <div class="summary">
                            <div class="summary-content mt-5">
                                <div class="summary-data">
                                    <p>Rows</p>
                                </div>
                                <div class="summary-data">
                                    <p >{{shape.0}}</p>
                                </div>
                            </div>
                            <div class="summary-content">
                                <div class="summary-data">
                                    <p>Columns</p>
                                </div>
                                <div class="summary-data">
                                    <p>{{shape.1}}</p>
                                </div>
                            </div>
                            <div id="data_count">
                            <!-- <div class="summary-content">
                                <div class="summary-data">
                                    <p>Data Type 1</p>
                                </div>
                                <div class="summary-data">
                                    <p>1</p>
                                </div>
                            </div>
                            <div class="summary-content">
                                <div class="summary-data">
                                    <p>Data Type 2</p>
                                </div>
                                <div class="summary-data">
                                    <p>1</p>
                                </div>
                            </div>
                            <div class="summary-content">
                                <div class="summary-data">
                                    <p>Data Type 3</p>
                                </div>
                                <div class="summary-data">
                                    <p>1</p>
                                </div>
                            </div> -->
                        </div>
                            <div class="summary-content">
                                <div class="summary-data">
                                    <p>Memory Used</p>
                                </div>
                                <div class="summary-data">
                                    <p>{{ memory|floatformat:1 }} MB</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <h2 class="white text-center">CoreRelations</h2>
                    <div class="graph text-center mt-5">
                        <div id="heatmap"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="py-5 container">
            <form action="/visualization" method="POST" id="form_graphs">
                {% csrf_token %}
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h3 class="font-weight-bold text-white mb-3">Plotting {{parent}}, {{child}}, {{grand_child}} and {{numerical_field}}</h3>
                 </div>
            <div class="col-lg-4">
                
               <table class="table table-borderless table-responsive table_height_custom">
              <thead>
                <tr>
                    <td class="font-weight-bold">
                        {{parent}}
                    </td>
                    
                </tr>

              </thead>                   
               <tbody id="table1">
                                  </tbody>
               </table>
               <div id="piechart1">
               </div>
               <div  id="barchart1"></div>
               <p class="text-center x_axis_label">{{parent}}</p>
               <div  id="horbarchart1"></div>
               <p class="text-center x_axis_label">{{parent}}</p>
               <div  id="stackchart1"></div>
               <p class="text-center x_axis_label">{{parent}}</p>
                <div  id="horstackchart1"></div>
                <p class="text-center x_axis_label">{{parent}}</p>
               <div  id="sunburst1"></div>
                <div  id="linechart1"></div>
                <p class="text-center x_axis_label">{{parent}}</p>
               <div  id="histogram1"></div>
               <p class="text-center x_axis_label">{{parent}}</p>
               <div  id="boxplot1"></div>
               <p class="text-center x_axis_label">{{parent}}</p>
               <div  id="bubblechart1"></div>
               <p class="text-center x_axis_label">{{parent}}</p> 

            </div>
            <div class="col-lg-4">
                
            <table class="table table-borderless table-responsive  table_height_custom">
                <thead>
                    <tr>
                        <td class="font-weight-bold">
                           {{child}}
                        </td>
                        
                    </tr>
    
                  </thead>
                <tbody id="table2">
                   
                </tbody>
                </table>
                <div class="" id="piechart2">
                </div>
                <div  id="barchart2"></div>
                <p class="text-center x_axis_label">{{child}}</p>
                <div  id="horbarchart2"></div>
                <p class="text-center x_axis_label">{{child}}</p>
                <div  id="stackchart2"></div> 
                <p class="text-center x_axis_label">{{child}}</p>
                 <div  id="horstackchart2"></div> 
                 <p class="text-center x_axis_label">{{child}}</p>
                <div id="sunburst2"></div>
                 <div id="linechart2"></div> 
                 <p class="text-center x_axis_label">{{child}}</p>
                 <div id="histogram2"></div> 
                 <p class="text-center x_axis_label">{{child}}</p>
                 <div id="boxplot2"></div> 
                 <p class="text-center x_axis_label">{{child}}</p>
                <div id="bubblechart2"></div>
                <p class="text-center x_axis_label">{{child}}</p>

            </div>
             <div class="col-lg-4">
                
            <table class="table table-borderless table-responsive  table_height_custom">
                <thead>
                    <tr>
                        <td class="font-weight-bold">
                            {{grand_child}}
                        </td>
                        
                    </tr>
    
                  </thead>
                <tbody id="table3">
                   
                </tbody>
                </table>
                <div  id="piechart3">
                </div>
                <div  id="barchart3"></div>
                <p class="text-center x_axis_label">{{grand_child}}</p>
                <div  id="horbarchart3"></div>
                <p class="text-center x_axis_label">{{grand_child}}</p>
                 <div  id="stackchart3"></div> 
                 <p class="text-center x_axis_label">{{grand_child}}</p>
                 <div  id="horstackchart3"></div> 
                 <p class="text-center x_axis_label">{{grand_child}}</p>
                <div id="sunburst3"></div>
                <div id="linechart3"></div>
                <p class="text-center x_axis_label">{{grand_child}}</p>
                 <div id="histogram3"></div>
                 <p class="text-center x_axis_label">{{grand_child}}</p>
                 <div id="boxplot3"></div>
                 <p class="text-center x_axis_label">{{grand_child}}</p>
                <div id="bubblechart3"></div>
                <p class="text-center x_axis_label">{{grand_child}}</p>
                
            </div> 
            
            </div>
            <div class="row">
                <div class="col-lg-12 mb-3">
                    <h5 class="text-white font-weight-bold">Select Dimensions</h5>
                </div>
                <div class="col-lg-4">
                <div class="select w-100">
                <select class="slct_table" data-name="1" name="field1" id="select1" onchange="table_change(this)">
                    {% for item in column_names %}
                    <option value="{{item}}">{{item}}</option>
               {% endfor %}
                </select>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="select w-100 ">
                <select class="slct_table" data-name="2" name="field2" id="select2" onchange="table_change(this)">
                    {% for item in column_names %}
                    <option value="{{item}}">{{item}}</option>
               {% endfor %}
                </select>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="select w-100">
                <select class="slct_table" data-name="3" name="field3" id="select3" onchange="table_change(this)">
                    {% for item in column_names %}
                    <option value="{{item}}">{{item}}</option>
               {% endfor %}
                </select>
                </div>
                </div>
            </div>
            <div class="row mt-4 ">
                <div class="col-lg-12 mb-3">
                    <h5 class="text-white font-weight-bold">Select Metric</h5>
                </div>
                <div class="col-lg-4">
                    <div class="select w-100">
                    <select class="slct_table" id="select4" name="field4" >
                        {% for item in numerical_columns %}
                             <option value="{{item}}">{{item}}</option>
                        {% endfor %}
                    </select>
                    </div>
                    </div>
                <div class="submit col-lg-4">
                    <button type="submit" class="btn" id="submit_chart">Submit</button>
                </div>
            </div>
        </form>
            </div>

        <div class="revecy banner py-5">
            <div class="row">
                <div class="col-lg-4 col-md-12 col-sm-12 col-xs-12 bannerleft d-flex align-items-center">
                    <div>
                        <h1 class="text-white">Simple Business<br> Insights</h1>
                    <div class="w-100">
                        <p class="mt-3 display-4 text-white">At Your Fingure Tips</p>
                    </div>
                    <button class="btn btn-lg mt-5 text-white  btn-outline-light" onclick="window.location.href='/#contact'">Learn More</button>
                    </div>
                </div>
                <div class="col-lg-8 col-md-12 col-sm-12 col-xs-12 bannerright d-flex justify-content-end">
                    <div class="bannerimg w-100 pt-5 pb-5">
                        <div class="row mt-4">
                            <div class="col-lg-4 col-md-4 col-sm-12 mt-3">
                                <div class="btn-img">
                                    <button type="button" class="circle-btn">Lead Score</button>
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-12 mt-3">
                                <div class="btn-img">
                                    <button type="button" class="circle-btn">Retention</button>
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-12 mt-3">
                                <div class="btn-img">
                                    <button type="button" class="circle-btn">LTV</button>
                                </div>
                            </div>
                        </div>
                        <div class="row mt-4">
                            <div class="col-lg-4 col-md-4 col-sm-12 mt-3">
                                <div class="btn-img">
                                    <button type="button" class="circle-btn">Cross Sell</button>
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-12 mt-3">
                                <div class="btn-img">
                                    <button type="button" class="circle-btn">Pricing</button>
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-12 mt-3">
                                <div class="btn-img">
                                    <button type="button" class="circle-btn">Baskets</button>
                                </div>
                            </div>
                        </div>
                        <div class="row mt-4">
                            <div class="col-lg-4 col-md-4 col-sm-12 mt-3">
                                <div class="btn-img">
                                    <button type="button" class="circle-btn">NLP</button>
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-12 mt-3">
                                <div class="btn-img">
                                    <button type="button" class="circle-btn">Churn</button>
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-12 mt-3">
                                <div class="btn-img">
                                    <button type="button" class="circle-btn">Prospensity</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


    </div>
    <form method="POST" action="/visualization" id="form2">
        {% csrf_token %}
        <input type="text" name="mappings" id="mappings" style="display: none;">
        <input type="text" name="file_name" id="file_name" style="display: none;">
    </form>

    <script src="/static/js/jquery-3.5.1.slim.min.js"></script>
    <script src="/static/js/popper.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>

{% if mappings %}
<script>

    var mappings =  {{mappings|safe}}
  if(mappings!=""){
    Object.keys(mappings).forEach(function(key) {
        $("#map_data_table").append(`
                    <tr class="d-flex white-space">
                        <td class="filterable-cell">`+key+`</td>
                        <td class="filterable-cell"><img src="/static/images/arrow.png"></td>
                        <td class="filterable-cell">`+mappings[key]+`</td>
                        <td class="filterable-cell"><button type="button" data-name=`+mappings[key]+` class="btn btn-sm btn-danger map-data-dlt">Delete</button></td>
                    </tr>
                `);
    })      

  }
  $("#form_graphs").append(`<input type="text" name="mappings" style="display:none" id="mappings_graphs">`)
  $("#form_graphs").append(`<input type="text" name="file_name" style="display:none" id="file_graphs">`)
  document.getElementById("mappings_graphs").value = JSON.stringify(mappings);
  document.getElementById("file_graphs").value = "{{file_name|safe}}"

</script>
{% else %}
<script>
  $("#form_graphs").append(`<input type="text" name="file_name" style="display:none" id="file_graphs">`)
  document.getElementById("file_graphs").value = "{{file_name|safe}}"
</script>

{% endif %}
    <script>
  
   var obj_box = {};       
        $(document).ready(function(){
            $("#mapButton").click(function(){
                $("#mapData").show();
            });

            /* Add data*/
            $('#add_map_data_row_form').submit(function() {
                // get all the inputs into an array.
                var $inputs = $('#add_map_data_row_form :input');
                // not sure if you wanted this, but I thought I'd add it.
                // get an associative array of just the values.
                
             var values = {};
                $inputs.each(function() {
                    values[this.name] = $(this).val();
                });
                if(values.select_field !== null){
                    obj_box[values.select_field] = values.select_type;

                
                $("select#slct_field :selected").attr("disabled",true)
                $("#map_data_table").append(`
                    <tr class="d-flex white-space">
                        <td class="filterable-cell">${values.select_field}</td>
                        <td class="filterable-cell"><img src="/static/images/arrow.png"></td>
                        <td class="filterable-cell">${values.select_type}</td>
                        <td class="filterable-cell"><button type="button" data-name=${values.select_field} class="btn btn-sm btn-danger map-data-dlt">Delete</button></td>
                    </tr>
                `);
                }
            });
            $(document).on("click",'.map-data-dlt',function(){
                $("select#slct_field option:contains("+$(this).attr("data-name")+")").attr("disabled",false);
                 if(obj_box[$(this).attr("data-name")] == "Family"){
                     count_fam-- ;
                     if(count_fam == 1){
                        document.getElementById("error").style.display = 'block' 
                     }
                     else{
                     document.getElementById("error").style.display = 'none'  
                     }
                 }
                delete obj_box[$(this).attr("data-name")];
                $(this).parent().parent().remove();
            });
            $("#file_btn").click(function(){
                var elem = $("#theFile");
                elem.click();
            });
            $("#theFile").change(function(){
                var id = Math.round(new Date().getTime() + Math.random());
                document.getElementById("random_name").value = id
 document.getElementById("form").submit();
            })
        });
        // console.log({{elem|safe}})
        var labels = []
   var data_heat=[];
    var arr = []
    var data = {{corr_data|safe}}
    var count_fam = 0;

    Object.keys(data).forEach(function(key) {
    labels.push(key);
     arr = [];
    Object.keys(data[key]).forEach(function(key2) {
    arr.push(data[key][key2]);
    })
    data_heat.push(arr)
    })

        var data = [
  {
    z: data_heat,
    x: labels,
    y: labels,
     type: 'heatmap',
     
  }
];
var config = {responsive: true,displayModeBar: false}
var layout = {
  title: 'Heat Map',
  yaxis: {
    automargin: true
  },
     plot_bgcolor:"#1056c7",
      paper_bgcolor:"#1056c7",
      font: {
    color: 'white'
  }
};
Plotly.newPlot('heatmap', data,layout,config);

var data_count =  {{data_types_dict_count|safe}};
   
 Object.keys(data_count).forEach(function(key) {
     $("#data_count").append(`
     <div class="summary-content">
                                <div class="summary-data">
                                    <p>`+key+`</p>
                                </div>
                                <div class="summary-data">
                                    <p>`+data_count[key]+`</p>
                                </div>
                            </div>
     `)

 })


 var csv =  {{top_rows|safe}};
var counter = 0;
Object.keys(csv).forEach(function(key) {
    $("#table_heading").append(`<th class="tbl-heading" scope="col">`+key+`</th>`)
    $("#table_body").append(`<tr class="d-flex white-space" id=row`+counter+`></tr>`)
    counter++;
})
counter = 0;
Object.keys(csv).forEach(function(key) {
    Object.keys(csv[key]).forEach(function(key2) {
$("#row"+counter).append(`<td class="tbl-data">`+csv[key][key2]+`</td>`)
counter++;
if(counter == 10){
    counter =0;
}
    })
})

// console.log({{file_name|safe}})

function values_box(){
    count_fam = 0;
    Object.keys(obj_box).forEach(function(key) {
     if(obj_box[key]=="Family"){
         count_fam ++;
     }
    })
    if(count_fam == 1){
       document.getElementById("error").style.display = 'block'     
     count_fam = 0;
     }
     else{
        document.getElementById("error").style.display = 'none'  
       document.getElementById("mappings").value = JSON.stringify(obj_box);
       document.getElementById("file_name").value = "{{file_name|safe}}"
       console.log( document.getElementById("mappings").value, document.getElementById("file_name").value)
       document.getElementById('form2').submit();
            }
}
var temp_row = 0;
var table_data = {{field_summary|safe}}
Object.keys(table_data["STATUS"]).forEach(function(key) {
    // console.log(table_data[val.value][key])
  $("#table1").append("<tr id=row_temp"+temp_row+"><tr>")
  $("#row_temp"+temp_row).append("<td>"+key+"</td>")
  $("#row_temp"+temp_row).append("<td>"+table_data["STATUS"][key]+"</td>")
  temp_row++;
   })
   Object.keys(table_data["STATUS"]).forEach(function(key) {
    // console.log(table_data[val.value][key])
  $("#table2").append("<tr id=row_temp"+temp_row+"><tr>")
  $("#row_temp"+temp_row).append("<td>"+key+"</td>")
  $("#row_temp"+temp_row).append("<td>"+table_data["STATUS"][key]+"</td>")
  temp_row++;
   })
   Object.keys(table_data["STATUS"]).forEach(function(key) {
    // console.log(table_data[val.value][key])
  $("#table3").append("<tr id=row_temp"+temp_row+"><tr>")
  $("#row_temp"+temp_row).append("<td>"+key+"</td>")
  $("#row_temp"+temp_row).append("<td>"+table_data["STATUS"][key]+"</td>")
  temp_row++;
   })
    function table_change(val){
        document.getElementById("submit_chart").innerText = "Plot Charts"
   console.log(val.getAttribute('data-name'))
   console.log(val.value)
   $("#table"+val.getAttribute('data-name')).html("")
   
   Object.keys(table_data[val.value]).forEach(function(key) {
    // console.log(table_data[val.value][key])
  $("#table"+val.getAttribute('data-name')).append("<tr id=row_temp"+temp_row+"><tr>")
  $("#row_temp"+temp_row).append("<td>"+key+"</td>")
  $("#row_temp"+temp_row).append("<td>"+table_data[val.value][key]+"</td>")
  temp_row++;
   
   })   
    }

    </script>

{% if parent %}
<script>
    document.getElementById("select1").value = "{{parent|safe}}"
    document.getElementById("select2").value = "{{child|safe}}"
    document.getElementById("select3").value = "{{grand_child|safe}}"
    document.getElementById("select4").value = "{{numerical_field|safe}}"
    Object.keys(table_data["{{parent|safe}}"]).forEach(function(key) {
    // console.log(table_data[val.value][key])
  $("#table1").append("<tr id=row_temp"+temp_row+"><tr>")
  $("#row_temp"+temp_row).append("<td>"+key+"</td>")
  $("#row_temp"+temp_row).append("<td>"+table_data["{{parent|safe}}"][key]+"</td>")
  temp_row++;
   })
   Object.keys(table_data["{{child|safe}}"]).forEach(function(key) {
    // console.log(table_data[val.value][key])
  $("#table2").append("<tr id=row_temp"+temp_row+"><tr>")
  $("#row_temp"+temp_row).append("<td>"+key+"</td>")
  $("#row_temp"+temp_row).append("<td>"+table_data["{{child|safe}}"][key]+"</td>")
  temp_row++;
   })
   Object.keys(table_data["{{grand_child|safe}}"]).forEach(function(key) {
    // console.log(table_data[val.value][key])
  $("#table3").append("<tr id=row_temp"+temp_row+"><tr>")
  $("#row_temp"+temp_row).append("<td>"+key+"</td>")
  $("#row_temp"+temp_row).append("<td>"+table_data["{{grand_child|safe}}"][key]+"</td>")
  temp_row++;
   })

</script>
{% endif %}

{% if field1_agg %}
<script>

var data_charts= {{field1_agg|safe}}
var data_charts2= {{field2_agg|safe}}
var data_charts3= {{field3_agg|safe}}
var data_new = {{field6_agg|safe}}
var data_new2 = {{field7_agg|safe}}
var data_new3 = {{field8_agg|safe}}
var parent1 = [];
var child1 = [];
var grandchild1 =[]
var parent2 = [];
var child2 = [];
var grandchild2 =[]
var parent3 = [];
var child3 = [];
var grandchild3 =[]

console.log(data_new)

 for(var i = 0;i<data_new.length;i++){
        for(var j = 0;j<data_new[i].length;j++){
         if(j == 0){
            if(parent1.indexOf(data_new[i][j]) == -1)
               {
                 parent1.push(data_new[i][j])
               }
         }
         else if(j == 1){
             if(child1.indexOf(data_new[i][j]) == -1)
               {
                 child1.push(data_new[i][j])
               }
         }
           
     }
 }

 for(var i = 0;i<data_new2.length;i++){
        for(var j = 0;j<data_new2[i].length;j++){
         if(j == 0){
            if(parent2.indexOf(data_new2[i][j]) == -1)
               {
                 parent2.push(data_new2[i][j])
               }
         }
         else if(j == 1){
             if(child2.indexOf(data_new2[i][j]) == -1)
               {
                 child2.push(data_new2[i][j])
               }
         }
           
     }
 }

 for(var i = 0;i<data_new3.length;i++){
        for(var j = 0;j<data_new3[i].length;j++){
         if(j == 0){
            if(parent3.indexOf(data_new3[i][j]) == -1)
               {
                 parent3.push(data_new3[i][j])
               }
         }
         else if(j == 1){
             if(child3.indexOf(data_new3[i][j]) == -1)
               {
                 child3.push(data_new3[i][j])
               }
         }
           
     }
 }

 for (var  i = 0 ;i<data_new.length; i=i+child1.length){
     var temp = [];
 for(var j= i ; j < (data_new.length > child1.length+i ? child1.length+i:data_new.length); j++){
          temp.push(data_new[j][2])
 }
  grandchild1.push(temp)
 }

 for (var  i = 0 ;i<data_new2.length; i=i+child2.length){
     var temp = [];
 for(var j= i ; j < (data_new2.length > child2.length+i ? child2.length+i:data_new2.length); j++){
          temp.push(data_new2[j][2])

 }
  grandchild2.push(temp)
 }

 for (var  i = 0 ;i<data_new3.length; i=i+child3.length){
     var temp = [];
 for(var j= i ; j < (data_new3.length > child3.length+i ? child3.length+i:data_new3.length); j++){
          temp.push(data_new3[j][2])
 }
  grandchild3.push(temp)
 }

var sun_parent1 = [];
var sun_child1 = []
var sun_grandchild1 = []
for (var i = 0;i<data_new.length;i++){
    console.log(i)
    sun_parent1.push(data_new[i][0])
}

console.log(sun_parent1)

for ( var i = 0 ; i< data_new.length ; i++){
    for(var j = 0; j<data_new[i].length;j++){
        if(j == 0){
            sun_parent1.push(String(data_new[i][j]))
        }
        else if(j == 1){
            sun_child1.push(data_new[i][j])
        }
        else{
            sun_grandchild1.push(data_new[i][j])
        }
    }
}

console.log(parent1,child1,grandchild1)
console.log(parent2,child2,grandchild2)
console.log(parent3,child3,grandchild3)


    var pie_1x=[]
    var pie_1y=[];
    var pie_2x=[]
    var pie_2y=[];
    var pie_3x=[]
    var pie_3y=[];

    Object.keys(data_charts).forEach(function(key) {
      pie_1x.push(key)
      pie_1y.push(data_charts[key])
    })   
    Object.keys(data_charts2).forEach(function(key) {
      pie_2x.push(key)
      pie_2y.push(data_charts2[key])
    })   
    Object.keys(data_charts3).forEach(function(key) {
      pie_3x.push(key)
      pie_3y.push(data_charts3[key])
    })   
    var data = [{
  values: pie_1y,
  labels: pie_1x,
  type: 'pie',
  
}];

var layout= {
      plot_bgcolor:"#262c37",
      paper_bgcolor:"#262c37",
      font: {
    color: 'white'
  },
 
  yaxis: {
    title: {
      text: '{{numerical_field|safe}}',
      font: {
        family: 'Courier New, monospace',
        size: 18,
        color: '#7f7f7f'
      }
    }
  }
}

var config = {responsive: true,displayModeBar: false}
Plotly.newPlot('piechart1',data,layout,config);

var data = [
  {
    x: pie_1x,
    y: pie_1y,
    type: 'bar'
  }
];
var config = {responsive: true,displayModeBar: false}
var layout= {
      plot_bgcolor:"#262c37",
      paper_bgcolor:"#262c37",
      font: {
    color: 'white'
  },
  yaxis: {
    title: {
      text: '{{numerical_field|safe}}',
      font: {
        family: 'Courier New, monospace',
        size: 18,
        color: '#FFFFFF'
      }
    }
  }
}

Plotly.newPlot('barchart1', data,layout,config);

var data = [{
  type: 'bar',
  x: pie_1x,
  y: pie_1y,
  orientation: 'h'
}];
var config = {responsive: true,displayModeBar: false}
var layout= {
      plot_bgcolor:"#262c37",
      paper_bgcolor:"#262c37",
      font: {
    color: 'white'
  },
  yaxis: {
    title: {
      text: '{{numerical_field|safe}}',
      font: {
        family: 'Courier New, monospace',
        size: 18,
        color: '#FFFFFF'
      }
    }
  }
}
Plotly.newPlot('horbarchart1', data,layout,config);


var data = [{
  values: pie_2y,
  labels: pie_2x,
  type: 'pie',
  
}];

var layout= {
      plot_bgcolor:"#262c37",
      paper_bgcolor:"#262c37",
      font: {
    color: 'white'
  },
  yaxis: {
    automargin: true
  },
  xaxis: {
    automargin: true
  }
}

var config = {responsive: true,displayModeBar: false}
Plotly.newPlot('piechart2',data,layout,config);


var data = [
  {
    x: pie_2x,
    y: pie_2y,
    type: 'bar'
  }
];
var config = {responsive: true,displayModeBar: false}
var layout= {
      plot_bgcolor:"#262c37",
      paper_bgcolor:"#262c37",
      font: {
    color: 'white'
  },
  yaxis: {
    title: {
      text: '{{numerical_field|safe}}',
      font: {
        family: 'Courier New, monospace',
        size: 18,
        color: '#FFFFFF'
      }
    }
  }
}

Plotly.newPlot('barchart2', data,layout,config);

var data = [{
  type: 'bar',
  x: pie_2x,
  y: pie_2y,
  orientation: 'h'
}];
var config = {responsive: true,displayModeBar: false}
var layout= {
      plot_bgcolor:"#262c37",
      paper_bgcolor:"#262c37",
      font: {
    color: 'white'
  },
  yaxis: {
    title: {
      text: '{{numerical_field|safe}}',
      font: {
        family: 'Courier New, monospace',
        size: 18,
        color: '#FFFFFF'
      }
    }
  }
}
Plotly.newPlot('horbarchart2', data,layout,config);

var data = [{
  values: pie_3y,
  labels: pie_3x,
  type: 'pie',
  
}];

var layout= {
      plot_bgcolor:"#262c37",
      paper_bgcolor:"#262c37",
      font: {
    color: 'white'
  },
  yaxis: {
    automargin: true
  },
  xaxis: {
    automargin: true
  }
}

var config = {responsive: true,displayModeBar: false}
Plotly.newPlot('piechart3',data,layout,config);



var data = [
  {
    x: pie_3x,
    y: pie_3y,
    type: 'bar'
  }
];
var config = {responsive: true,displayModeBar: false}
var layout= {
      plot_bgcolor:"#262c37",
      paper_bgcolor:"#262c37",
      font: {
    color: 'white'
  },
  yaxis: {
    title: {
      text: '{{numerical_field|safe}}',
      font: {
        family: 'Courier New, monospace',
        size: 18,
        color: '#FFFFFF'
      }
    }
  }
}

Plotly.newPlot('barchart3', data,layout,config);

var data = [{
  type: 'bar',
  x: pie_3x,
  y: pie_3y,
  orientation: 'h'
}];
var config = {responsive: true,displayModeBar: false}
var layout= {
      plot_bgcolor:"#262c37",
      paper_bgcolor:"#262c37",
      font: {
    color: 'white'
  },
  yaxis: {
    title: {
      text: '{{numerical_field|safe}}',
      font: {
        family: 'Courier New, monospace',
        size: 18,
        color: '#FFFFFF'
      }
    }
  }
}
Plotly.newPlot('horbarchart3', data,layout,config);


var traces1 = []
for (var i =0 ; i<parent1.length;i++){
    var obj ={
        x: child1,
  y: grandchild1[i],
  name: parent1[i],
  type: 'bar'       
    }
    traces1.push(obj)
}


var data = traces1;

var layout = {barmode: 'stack', plot_bgcolor:"#262c37",
       paper_bgcolor:"#262c37",
       font: {
     color: 'white'},
     yaxis: {
    title: {
      text: '{{numerical_field|safe}}',
      font: {
        family: 'Courier New, monospace',
        size: 18,
        color: '#FFFFFF'
      }
    }
  }
};
var config = {responsive: true,displayModeBar: false}
Plotly.newPlot('stackchart1', data, layout,config);

var traces2 = []
for (var i =0 ; i<parent2.length;i++){
    var obj ={
        x: child2,
  y: grandchild2[i],
  name: parent2[i],
  type: 'bar'       
    }
    traces2.push(obj)
}


console.log(traces2)
var data = traces2;
var layout = {barmode: 'stack', plot_bgcolor:"#262c37",
       paper_bgcolor:"#262c37",
       font: {
     color: 'white'},
     yaxis: {
    title: {
      text: '{{numerical_field|safe}}',
      font: {
        family: 'Courier New, monospace',
        size: 18,
        color: '#FFFFFF'
      }
    }
  }
};
var config = {responsive: true,displayModeBar: false}
Plotly.newPlot('stackchart2', data, layout,config);



var traces3 = []
for (var i =0 ; i<parent3.length;i++){
    var obj ={
        x: child3,
  y: grandchild3[i],
  name: parent3[i],
  type: 'bar'       
    }
    traces3.push(obj)
}


var data = traces3;

var layout = {barmode: 'stack', plot_bgcolor:"#262c37",
       paper_bgcolor:"#262c37",
       font: {
     color: 'white'},
     yaxis: {
    title: {
      text: '{{numerical_field|safe}}',
      font: {
        family: 'Courier New, monospace',
        size: 18,
        color: '#FFFFFF'
      }
    }
  }
};
var config = {responsive: true,displayModeBar: false}
Plotly.newPlot('stackchart3', data, layout,config);

traces1=[]
for (var i =0 ; i<parent1.length;i++){
    var obj ={
        x: grandchild1[i],
  y: child1,
  name: parent1[i],
  orientation: 'h',
  type: 'bar'       
    }
    traces1.push(obj)
}


var data = traces1;

var layout = {barmode: 'stack', plot_bgcolor:"#262c37",
       paper_bgcolor:"#262c37",
       font: {
     color: 'white'},
     yaxis: {
    title: {
      text: '{{numerical_field|safe}}',
      font: {
        family: 'Courier New, monospace',
        size: 18,
        color: '#FFFFFF'
      }
    }
  }
};
var config = {responsive: true,displayModeBar: false}
Plotly.newPlot('horstackchart1', data, layout,config);

traces2=[]
for (var i =0 ; i<parent2.length;i++){
    var obj ={
        x: grandchild2[i],
  y: child2,
  name: parent2[i],
  orientation: 'h',
  type: 'bar'       
    }
    traces2.push(obj)
}


var data = traces2;

var layout = {barmode: 'stack', plot_bgcolor:"#262c37",
       paper_bgcolor:"#262c37",
       font: {
     color: 'white'},
     yaxis: {
    title: {
      text: '{{numerical_field|safe}}',
      font: {
        family: 'Courier New, monospace',
        size: 18,
        color: '#FFFFFF'
      }
    }
  }
};
var config = {responsive: true,displayModeBar: false}
Plotly.newPlot('horstackchart2', data, layout,config);

traces3=[]
for (var i =0 ; i<parent3.length;i++){
    var obj ={
        x: grandchild3[i],
  y: child3,
  name: parent3[i],
  orientation: 'h',
  type: 'bar'       
    }
    traces3.push(obj)
}


var data = traces3;

var layout = {barmode: 'stack', plot_bgcolor:"#262c37",
       paper_bgcolor:"#262c37",
       font: {
     color: 'white'},
     yaxis: {
    title: {
      text: '{{numerical_field|safe}}',
      font: {
        family: 'Courier New, monospace',
        size: 18,
        color: '#FFFFFF'
      }
    }
  }
};
var config = {responsive: true,displayModeBar: false}
Plotly.newPlot('horstackchart3', data, layout,config);


var data = [{
  type: "sunburst",

  //Parent child Ids for data mapping
  ids: {{sb_ids|safe}},
 
  values:{{sb_values|safe}},
  labels: {{sb_labels|safe}},
  parents: {{sb_parents|safe}},
  outsidetextfont: {size: 20, color: "#377eb8"},
  // leaf: {opacity: 0.4},
  marker: {line: {width: 2}},
}];

var layout = {
   margin: {l: 0, r: 0, b: 0, t:0},
   sunburstcolorway:["#636efa","#ef553b","#00cc96"],
    plot_bgcolor:"#262c37",
        paper_bgcolor:"#262c37",
        font: {
      color: 'white'
        },
        yaxis: {
    title: {
      text: '{{numerical_field|safe}}',
      font: {
        family: 'Courier New, monospace',
        size: 18,
        color: '#FFFFFF'
      }
    }
  }
 };

 var config = {responsive: true,displayModeBar: false}
 Plotly.newPlot('sunburst1', data, layout,config);
 Plotly.newPlot('sunburst2', data, layout,config);
 Plotly.newPlot('sunburst3', data, layout,config);

// Plotly.newPlot('myDiv', data, layout);

traces1=[]
for (var i =0 ; i<parent1.length;i++){
    var obj ={
        x:child1,
        y:grandchild1[i],
  name: parent1[i],
  type: 'scatter'       
    }
    traces1.push(obj)
}



var data = traces1;

var layout = {barmode: 'stack', plot_bgcolor:"#262c37",
       paper_bgcolor:"#262c37",
       font: {
     color: 'white'},
     yaxis: {
    title: {
      text: '{{numerical_field|safe}}',
      font: {
        family: 'Courier New, monospace',
        size: 18,
        color: '#FFFFFF'
      }
    }
  }
};
var config = {responsive: true,displayModeBar: false}


Plotly.newPlot('linechart1', data,layout,config);

traces2=[]
for (var i =0 ; i<parent2.length;i++){
    var obj ={
        x:child2,
        y:grandchild2[i],
  name: parent2[i],
  type: 'scatter'       
    }
    traces2.push(obj)
}



var data = traces2;

var layout = {barmode: 'stack', plot_bgcolor:"#262c37",
       paper_bgcolor:"#262c37",
       font: {
     color: 'white'},
     yaxis: {
    title: {
      text: '{{numerical_field|safe}}',
      font: {
        family: 'Courier New, monospace',
        size: 18,
        color: '#FFFFFF'
      }
    }
  }
};
var config = {responsive: true,displayModeBar: false}


Plotly.newPlot('linechart2', data,layout,config);

traces3=[]
for (var i =0 ; i<parent3.length;i++){
    var obj ={
        x:child3,
        y:grandchild3[i],
  name: parent3[i],
  type: 'scatter'       
    }
    traces3.push(obj)
}



var data = traces3;

var layout = {barmode: 'stack', plot_bgcolor:"#262c37",
       paper_bgcolor:"#262c37",
       font: {
     color: 'white'},
     yaxis: {
    title: {
      text: '{{numerical_field|safe}}',
      font: {
        family: 'Courier New, monospace',
        size: 18,
        color: '#FFFFFF'
      }
    }
  }
};
var config = {responsive: true,displayModeBar: false}


Plotly.newPlot('linechart3', data,layout,config);

var histog1 =  {{hist_parent_dict|safe}}
var histog2 = {{hist_children_dict|safe}}
var histog3 = {{hist_grand_children_dict|safe}}

console.log(histog1)
traces1 = [];

Object.keys(histog1).forEach(function(key) {
 var obj = {
     x:histog1[key],
     type:"histogram",
     name:key
 }
 traces1.push(obj)

})

 var data = traces1
 
var layout = {barmode: 'stack', plot_bgcolor:"#262c37",
       paper_bgcolor:"#262c37",
       font: {
     color: 'white'},
     yaxis: {
    title: {
      text: '{{numerical_field|safe}}',
      font: {
        family: 'Courier New, monospace',
        size: 18,
        color: '#FFFFFF'
      }
    }
  }
};
var config = {responsive: true,displayModeBar: false}
Plotly.newPlot('histogram1', data,layout,config);


traces2 = [];
console.log(histog2)
Object.keys(histog2).forEach(function(key) {
 var obj = {
     x:histog2[key],
     type:"histogram",
     name:key
 }
 traces2.push(obj)

})

 var data = traces2
 
var layout = {barmode: 'stack', plot_bgcolor:"#262c37",
       paper_bgcolor:"#262c37",
       font: {
     color: 'white'},
     yaxis: {
    title: {
      text: '{{numerical_field|safe}}',
      font: {
        family: 'Courier New, monospace',
        size: 18,
        color: '#FFFFFF'
      }
    }
  }
};
var config = {responsive: true,displayModeBar: false}
Plotly.newPlot('histogram2', data,layout,config);


traces3 = [];
Object.keys(histog3).forEach(function(key) {
 var obj = {
     x:histog3[key],
     type:"histogram",
     name:key
 }
 traces3.push(obj)

})

 var data = traces3
 
var layout = {barmode: 'stack', plot_bgcolor:"#262c37",
       paper_bgcolor:"#262c37",
       font: {
     color: 'white'},
     yaxis: {
    title: {
      text: '{{numerical_field|safe}}',
      font: {
        family: 'Courier New, monospace',
        size: 18,
        color: '#FFFFFF'
      }
    }
  }
};
var config = {responsive: true,displayModeBar: false}
Plotly.newPlot('histogram3', data,layout,config);

traces1 = [];

Object.keys(histog1).forEach(function(key) {
 var obj = {
    y: histog1[key],
  type: 'box',
  name: key
 }
 traces1.push(obj)

})

var data = traces1;

var layout = {
    plot_bgcolor:"#262c37",
       paper_bgcolor:"#262c37",
       font: {
     color: 'white'
       },
       yaxis: {
    title: {
      text: '{{numerical_field|safe}}',
      font: {
        family: 'Courier New, monospace',
        size: 18,
        color: '#FFFFFF'
      }
    }
  }
};
var config = {responsive: true,displayModeBar: false}
Plotly.newPlot('boxplot1', data, layout,config);

traces2 = [];

Object.keys(histog2).forEach(function(key) {
 var obj = {
    y: histog2[key],
  type: 'box',
  name: key
 }
 traces2.push(obj)

})

var data = traces2;

var layout = {
    plot_bgcolor:"#262c37",
       paper_bgcolor:"#262c37",
       font: {
     color: 'white'
       },
       yaxis: {
    title: {
      text: '{{numerical_field|safe}}',
      font: {
        family: 'Courier New, monospace',
        size: 18,
        color: '#FFFFFF'
      }
    }
  }
};
var config = {responsive: true,displayModeBar: false}
Plotly.newPlot('boxplot2', data, layout,config);

traces3 = [];

Object.keys(histog3).forEach(function(key) {
 var obj = {
    y: histog3[key],
  type: 'box',
  name: key
 }
 traces3.push(obj)

})

var data = traces3;

var layout = {
    plot_bgcolor:"#262c37",
       paper_bgcolor:"#262c37",
       font: {
     color: 'white'
       },
       yaxis: {
    title: {
      text: '{{numerical_field|safe}}',
      font: {
        family: 'Courier New, monospace',
        size: 18,
        color: '#FFFFFF'
      }
    }
  }
};
var config = {responsive: true,displayModeBar: false}
Plotly.newPlot('boxplot3', data, layout,config);


var bubble_data = {{bubble_plot|safe}}
console.log("bubble",bubble_data)
var data_bubble ={}
var count_bubble=0;
var key_count = 0;
var keys= [];
Object.keys(bubble_data).forEach(function(key) {
   key_count++;
   keys.push(key)
    Object.keys(bubble_data[key]).forEach(function(key2) {
        data_bubble[count_bubble] = bubble_data[key][key2]
          count_bubble++;
    })
})

console.log(count_bubble , data_bubble)
var num1 = data_bubble[i+2].reduce((a, b) => a + b, 0)
var sum1 =  parseInt((num1.toString()).substring(0,3))
var num2 = data_bubble[i+1].reduce((a, b) => a + b, 0)
var sum2 =  parseInt((num2.toString()).substring(0,3))
var sum = sum1>sum2? sum1:sum2;
traces1 = []
temp_var = 0;
for(var i = 0;i<count_bubble;i+=key_count){
    var obj = {
  x: [data_bubble[i].reduce((a, b) => a + b, 0)/data_bubble[i].length],
  y: [data_bubble[i+1].length],
  name:keys[temp_var],
  mode: 'markers',
  marker: {
    size:  [data_bubble[i+2].reduce((a, b) => a + b, 0)/sum]
  
  }
};
temp_var++;
traces1.push(obj)
}
console.log(traces1)
var data = traces1;
var layout = {
    plot_bgcolor:"#262c37",
       paper_bgcolor:"#262c37",
       font: {
     color: 'white'
       },
       yaxis: {
    title: {
      text: '{{numerical_field|safe}}',
      font: {
        family: 'Courier New, monospace',
        size: 18,
        color: '#FFFFFF'
      }
    }
  }
};
var config = {responsive: true,displayModeBar: false}
Plotly.newPlot('bubblechart1', data, layout,config);
Plotly.newPlot('bubblechart2', data, layout,config);
Plotly.newPlot('bubblechart3', data, layout,config);

 </script>
{% endif %}
</body>
</html>