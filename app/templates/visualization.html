<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/style.css">
    
    <title>Revecy</title>
</head>
<body>
    <div class="bg-clr">
        <div class="revecy pt-3">
            <nav class="navbar navbar-expand-lg navbar-dark navbar-light px-0">
                <a class="navbar-brand" href="#"><img src="/static/images/logo-header.png" alt=""></a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item mr-5">
                            <a class="nav-link text-white" href="#">Contact</a>
                        </li>
                        <li class="nav-item mr-5">
                            <a class="nav-link text-white" href="#">Blog</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-white" href="#">SBI</a>
                        </li>
                    </ul>
                </div>
            </nav>
        </div>
        
        <div class="revecy banner py-5">
            <div class="row">
                <div class="col-lg-6 col-md-6 col-sm-12 bannerleft d-flex align-items-center">
                    <div>
                        <h1 class="text-white">Simple Business<br> Insights</h1>
                    <div class="w-100">
                        <p class="mt-3 display-4 text-white">Breathe life into your data in minutes and ponder on the real problem
                        </p>
                    </div>
                    <div class="btn btn-lg mt-2 text-white">Learn More</div>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 col-sm-12 bannerright d-flex justify-content-end">
                    <div class="bannerimg w-75 pt-3 pb-3">
                        <img src="/static/images/banner-icons.jpg" class="w-100" alt="">
                    </div>
                </div>
            </div>
        </div>

        <div class="bridging-perception py-5">
            <div class="row ml-2">
                <div class="col-lg-12">
                    <div class="analyze">
                        <img class="" src="/static/images/analyze-icon.jpg">
                        <h2>Analyze</h2>
                    </div>
                </div>
            </div>
            <div class="row revecy mt-5">
                <div class="col-lg-4 d-flex justify-content-center mt-3">
                    <div class="button">
                        <button type="button" class="btn" id="file_btn">Get Data</button>
                        <form method="post" action="/visualization" id="form" enctype="multipart/form-data">    
                            {% csrf_token %}   
                            <input type ="text" name="file_name" id="random_name" style="display:none">                  
                            <input type="file" id="theFile" name="csv_file" accept=".csv"/>
                        </form>
                        <div class="icon">
                            <img src="/static/images/right-arrow.jpg">
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 d-flex justify-content-center mt-3">
                    <div class="button">
                        <button type="button" class="btn">Try Sample</button>
                        <div class="icon">
                            <img src="/static/images/right-arrow.jpg">
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 d-flex justify-content-center mt-3">
                    <div class="button">
                        <button id="mapButton" type="button" class="btn">Map Data</button>
                        <div class="icon">
                            <img src="/static/images/right-arrow.jpg">
                        </div>
                    </div>
                </div>
            </div>
            <!-- Table-->
            <div class="row revecy mt-5">
                <div id="mapData">
                    <form action = "javascript:;" id="add_map_data_row_form">
                        <div class="row select-options">
                            <div class="col-lg-6 mb-5">
                                <label class="select-name">Select Field</label>
                                <div class="select">
                                    <select name="select_field" id="slct_field" required>
                                    </select>
                                </div>
                            </div>
                            <div class="col-lg-6 mb-5">
                                <label class="select-name">Select Type</label>
                                <div class="select">
                                    <select name="select_type" id="slct_type" required>
                                        <option value="Full Address">Full Address</option>
                                        <option value="ZipCode">ZipCode</option>
                                        <option value="City">City</option>
                                        <option value="State">State</option>
                                        <option value="Country">Country</option>
                                        <option value="Continent">Continent</option>
                                        <option value="URL">URL</option>
                                        <option value="Date">Date</option>
                                        <option value="Family">Family</option>
                                    </select>
                                </div>
                            </div>
                            <!-- <div class="col-lg-4 mb-5">
                                <label class="select-name">Transformation</label>
                                <div class="select">
                                    <select name="select_transformation" id="slct_transformation" required>
                                        <option selected disabled>Choose an option</option>
                                        <option value="Transformation 1">Option 1</option>
                                        <option value="Transformation 2">Option 2</option>
                                        <option value="Transformation 3">Option 3</option>
                                    </select>
                                </div>
                            </div> -->
                            <div class="col-lg-12 text-center">
                                <button type="submit" class="btn btn-primary border-0 mb-4">Add Data</button>
                            </div>
                        </div>
                    </form>
                    <div class="blue-table-scroll" id="style-scroll">
                        <div class="row">
                            <div class="col-lg-12">
                                <table class="table">
                                    <tbody id="map_data_table">
                                        <tr class="d-flex white-space" >
                                          <td class="filterable-cell">
                                            <div class="alert alert-danger text-center" id="error">You need to select at least two variables in a family</div>
                                          </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <div class="submit">
                                    <button type="button" class="btn" onclick="values_box()">Submit</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="table-scroll">
                    <div class="row">
                        <div class="col-lg-12 d-flex">
                            <table class="table">
                                <thead>
                                <tr class="d-flex white-space" id="table_heading">
                                   
                                </tr>
                                </thead>
                                <tbody id="table_body">
                                <!-- <tr class="d-flex white-space">
                                    <td class="filterable-cell left-data">Data</td>
                                    <td class="filterable-cell middle-data">Data</td>
                                    <td class="filterable-cell right-data">Data</td>
                                    <td class="filterable-cell right-data">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8">Data</td>
                                    <td class="filterable-cell right-data">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8">Data</td>
                                    <td class="filterable-cell right-data">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8 border-bottom-l-r">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8 border-bottom-l-l">Data</td>
                                    <td class="filterable-cell right-data">Data</td>
                                </tr> -->
                                </tbody>
                            </table>

                            <!-- <table class="table ml-12">
                                <thead>
                                <tr class="d-flex white-space">
                                    <th class="left-heading">Field 1</th>
                                    <th class="middle-heading">Field 1</th>
                                    <th class="right-heading">Field 1</th>
                                </tr>
                                </thead>
                                <tbody">
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell left-data">Data</td>
                                    <td class="filterable-cell middle-data">Data</td>
                                    <td class="filterable-cell right-data">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8 border-bottom-l-r">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8 border-bottom-l-l">Data</td>
                                </tr>
                                </tbody>
                            </table>

                            <table class="table ml-12">
                                <thead>
                                <tr class="d-flex white-space">
                                    <th class="left-heading">Field 1</th>
                                    <th class="middle-heading">Field 1</th>
                                    <th class="right-heading">Field 1</th>
                                </tr>
                                </thead>
                                <tbody">
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell left-data">Data</td>
                                    <td class="filterable-cell middle-data">Data</td>
                                    <td class="filterable-cell right-data">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8 border-bottom-l-r">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8 border-bottom-l-l">Data</td>
                                </tr>
                                </tbody>
                            </table>

                            <table class="table ml-12">
                                <thead>
                                <tr class="d-flex white-space">
                                    <th class="left-heading">Field 1</th>
                                    <th class="middle-heading">Field 1</th>
                                    <th class="right-heading">Field 1</th>
                                </tr>
                                </thead>
                                <tbody">
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell left-data">Data</td>
                                    <td class="filterable-cell middle-data">Data</td>
                                    <td class="filterable-cell right-data">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8 border-bottom-l-r">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8 border-bottom-l-l">Data</td>
                                </tr>
                                </tbody>
                            </table>

                            <table class="table ml-12">
                                <thead>
                                <tr class="d-flex white-space">
                                    <th class="left-heading">Field 1</th>
                                    <th class="middle-heading">Field 1</th>
                                    <th class="right-heading">Field 1</th>
                                </tr>
                                </thead>
                                <tbody">
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell left-data">Data</td>
                                    <td class="filterable-cell middle-data">Data</td>
                                    <td class="filterable-cell right-data">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8 border-bottom-l-r">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8 border-bottom-l-l">Data</td>
                                </tr>
                                </tbody>
                            </table>
                            
                            <table class="table ml-12">
                                <thead>
                                <tr class="d-flex white-space">
                                    <th class="left-heading">Field 1</th>
                                    <th class="middle-heading">Field 1</th>
                                    <th class="right-heading">Field 1</th>
                                </tr>
                                </thead>
                                <tbody">
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell left-data">Data</td>
                                    <td class="filterable-cell middle-data">Data</td>
                                    <td class="filterable-cell right-data">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8 border-bottom-l-r">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8 border-bottom-l-l">Data</td>
                                </tr>
                                </tbody>
                            </table>
                            
                            <table class="table ml-12">
                                <thead>
                                <tr class="d-flex white-space">
                                    <th class="left-heading">Field 1</th>
                                    <th class="middle-heading">Field 1</th>
                                    <th class="right-heading">Field 1</th>
                                </tr>
                                </thead>
                                <tbody">
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell left-data">Data</td>
                                    <td class="filterable-cell middle-data">Data</td>
                                    <td class="filterable-cell right-data">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8 border-bottom-l-r">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8 border-bottom-l-l">Data</td>
                                </tr>
                                </tbody>
                            </table>

                            <table class="table ml-12 mr-12">
                                <thead>
                                <tr class="d-flex white-space">
                                    <th class="left-heading">Field 1</th>
                                    <th class="middle-heading">Field 1</th>
                                    <th class="right-heading">Field 1</th>
                                </tr>
                                </thead>
                                <tbody">
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell left-data">Data</td>
                                    <td class="filterable-cell middle-data">Data</td>
                                    <td class="filterable-cell right-data">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8">Data</td>
                                </tr>
                                <tr class="d-flex white-space">
                                    <td class="filterable-cell data mr-8 border-bottom-l-r">Data</td>
                                    <td class="filterable-cell data">Data</td>
                                    <td class="filterable-cell data ml-8 border-bottom-l-l">Data</td>
                                </tr>
                                </tbody>
                            </table> -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="revecy py-5 blue-bg">
            <div class="row">
                <div class="col-lg-6">
                    <h2 class="white text-center">File Summary</h2>
                    <div class="d-flex">
                        <div class="summary">
                            <div class="summary-content mt-5">
                                <div class="summary-data">
                                    <p>Rows</p>
                                </div>
                                <div class="summary-data">
                                    <p >{{shape.0}}</p>
                                </div>
                            </div>
                            <div class="summary-content">
                                <div class="summary-data">
                                    <p>Columns</p>
                                </div>
                                <div class="summary-data">
                                    <p>{{shape.1}}</p>
                                </div>
                            </div>
                            <div id="data_count">
                            <!-- <div class="summary-content">
                                <div class="summary-data">
                                    <p>Data Type 1</p>
                                </div>
                                <div class="summary-data">
                                    <p>1</p>
                                </div>
                            </div>
                            <div class="summary-content">
                                <div class="summary-data">
                                    <p>Data Type 2</p>
                                </div>
                                <div class="summary-data">
                                    <p>1</p>
                                </div>
                            </div>
                            <div class="summary-content">
                                <div class="summary-data">
                                    <p>Data Type 3</p>
                                </div>
                                <div class="summary-data">
                                    <p>1</p>
                                </div>
                            </div> -->
                        </div>
                            <div class="summary-content">
                                <div class="summary-data">
                                    <p>Memory Used</p>
                                </div>
                                <div class="summary-data">
                                    <p>{{memory}} MB</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <h2 class="white text-center">CoreRelations</h2>
                    <div class="graph text-center mt-5">
                        <div id="heatmap"></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="py-5 container">
            <div class="row">
            <div class="col-lg-4">
                <div class="select w-100">
                    <select class="slct_table" data-name="1" id="select1" onchange="table_change(this)">
                       
                    </select>
                </div>
               <table class="table table-borderless table-responsive">
               <tbody id="table1">
                   <tr>
                       <td>Americans</td>
                       <td>3.00</td>
                   </tr>
                   <tr>
                    <td>Cappuccino</td>
                    <td>3.00</td>
                </tr>
                <tr>
                    <td>Double Espresso</td>
                    <td>3.00</td>
                </tr>
                <tr>
                    <td>Latte</td>
                    <td>3.00</td>
                </tr>
                <tr>
                    <td>Macchiato</td>
                    <td>3.00</td>
                </tr>
                <tr>
                    <td>Mint Chocolate</td>
                    <td>3.00</td>
                </tr>
                <tr>
                    <td>Mocha</td>
                    <td>3.00</td>
                </tr>
                <tr>
                    <td>White Mocha</td>
                    <td>3.00</td>
                </tr>
               </tbody>
               </table>
               <div id="piechart1">
               </div>
               <div  id="barchart1"></div>
               <div  id="horbarchart1"></div>
               <div  id="stackchart1"></div>
               <div  id="horstackchart1"></div>


            </div>
            <div class="col-lg-4">
                <div class="select w-100">
                <select class="slct_table" data-name="2" id="select2" onchange="table_change(this)">
                </select>
            </div>
            <table class="table table-borderless table-responsive">
                <tbody id="table2">
                    <tr>
                        <td>Americans</td>
                        <td>3.00</td>
                    </tr>
                    <tr>
                     <td>Cappuccino</td>
                     <td>3.00</td>
                 </tr>
                 <tr>
                     <td>Double Espresso</td>
                     <td>3.00</td>
                 </tr>
                 <tr>
                     <td>Latte</td>
                     <td>3.00</td>
                 </tr>
                 <tr>
                     <td>Macchiato</td>
                     <td>3.00</td>
                 </tr>
                 <tr>
                     <td>Mint Chocolate</td>
                     <td>3.00</td>
                 </tr>
                 <tr>
                     <td>Mocha</td>
                     <td>3.00</td>
                 </tr>
                 <tr>
                     <td>White Mocha</td>
                     <td>3.00</td>
                 </tr>
                </tbody>
                </table>
                <div class="" id="piechart2">
                </div>
                <div  id="barchart2"></div>
                <div  id="horbarchart2"></div>
 
            </div>
            <div class="col-lg-4">
                <div class="select w-100">
                <select class="slct_table" data-name="3" id="select3" onchange="table_change(this)">
                </select>
            </div>
            <table class="table table-borderless table-responsive">
                <tbody id="table3">
                    <tr>
                        <td>Americans</td>
                        <td>3.00</td>
                    </tr>
                    <tr>
                     <td>Cappuccino</td>
                     <td>3.00</td>
                 </tr>
                 <tr>
                     <td>Double Espresso</td>
                     <td>3.00</td>
                 </tr>
                 <tr>
                     <td>Latte</td>
                     <td>3.00</td>
                 </tr>
                 <tr>
                     <td>Macchiato</td>
                     <td>3.00</td>
                 </tr>
                 <tr>
                     <td>Mint Chocolate</td>
                     <td>3.00</td>
                 </tr>
                 <tr>
                     <td>Mocha</td>
                     <td>3.00</td>
                 </tr>
                 <tr>
                     <td>White Mocha</td>
                     <td>3.00</td>
                 </tr>
                </tbody>
                </table>
                <div  id="piechart3">
                </div>
                <div  id="barchart3"></div>
                <div  id="horbarchart3"></div>
                <div  id="stackchart3"></div>
                <div  id="horstackchart3"></div>

 
            </div>
            <!-- <div class="col-lg-2">
                <div class="select w-100">
                    <select class="slct_table" data-name="4" id="select4" onchange="table_change(this)">
                    </select>
                </div>
                <table class="table table-borderless table-responsive" >
                    <tbody id="table4">
                        <tr>
                            <td>Americans</td>
                            <td>3.00</td>
                        </tr>
                        <tr>
                         <td>Cappuccino</td>
                         <td>3.00</td>
                     </tr>
                     <tr>
                         <td>Double Espresso</td>
                         <td>3.00</td>
                     </tr>
                     <tr>
                         <td>Latte</td>
                         <td>3.00</td>
                     </tr>
                     <tr>
                         <td>Macchiato</td>
                         <td>3.00</td>
                     </tr>
                     <tr>
                         <td>Mint Chocolate</td>
                         <td>3.00</td>
                     </tr>
                     <tr>
                         <td>Mocha</td>
                         <td>3.00</td>
                     </tr>
                     <tr>
                         <td>White Mocha</td>
                         <td>3.00</td>
                     </tr>
                    </tbody>
                    </table>
                    <canvas class="" id="piechart4">
                    </canvas>
                    <div  id="barchart4"></div>
                    <div  id="horbarchart4"></div>
     
                </div>
            <div class="col-lg-2">
                <div class="select w-100">
                    <select class="slct_table" data-name="5" id="select5" onchange="table_change(this)">
                    </select>
                </div>
                <table class="table table-borderless table-responsive" >
                    <tbody id="table5">
                        <tr>
                            <td>Americans</td>
                            <td>3.00</td>
                        </tr>
                        <tr>
                         <td>Cappuccino</td>
                         <td>3.00</td>
                     </tr>
                     <tr>
                         <td>Double Espresso</td>
                         <td>3.00</td>
                     </tr>
                     <tr>
                         <td>Latte</td>
                         <td>3.00</td>
                     </tr>
                     <tr>
                         <td>Macchiato</td>
                         <td>3.00</td>
                     </tr>
                     <tr>
                         <td>Mint Chocolate</td>
                         <td>3.00</td>
                     </tr>
                     <tr>
                         <td>Mocha</td>
                         <td>3.00</td>
                     </tr>
                     <tr>
                         <td>White Mocha</td>
                         <td>3.00</td>
                     </tr>
                    </tbody>
                    </table>
                    <canvas class="" id="piechart5">
                    </canvas>
                    <div  id="barchart5"></div>
                    <div  id="horbarchart5"></div>
     
            </div> -->
            
            </div>
            </div>

        <div class="revecy banner py-5">
            <div class="row">
                <div class="col-lg-4 col-md-12 col-sm-12 col-xs-12 bannerleft d-flex align-items-center">
                    <div>
                        <h1 class="text-white">Simple Business<br> Insights</h1>
                    <div class="w-100">
                        <p class="mt-3 display-4 text-white">At Your Fingure Tips</p>
                    </div>
                    <div class="btn btn-lg mt-2 text-white">Learn More</div>
                    </div>
                </div>
                <div class="col-lg-8 col-md-12 col-sm-12 col-xs-12 bannerright d-flex justify-content-end">
                    <div class="bannerimg w-100 pt-5 pb-5">
                        <div class="row mt-4">
                            <div class="col-lg-4 col-md-4 col-sm-12 mt-3">
                                <div class="btn-img">
                                    <button type="button" class="circle-btn">Load Score</button>
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-12 mt-3">
                                <div class="btn-img">
                                    <button type="button" class="circle-btn">Load Score</button>
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-12 mt-3">
                                <div class="btn-img">
                                    <button type="button" class="circle-btn">Load Score</button>
                                </div>
                            </div>
                        </div>
                        <div class="row mt-4">
                            <div class="col-lg-4 col-md-4 col-sm-12 mt-3">
                                <div class="btn-img">
                                    <button type="button" class="circle-btn">Load Score</button>
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-12 mt-3">
                                <div class="btn-img">
                                    <button type="button" class="circle-btn">Load Score</button>
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-12 mt-3">
                                <div class="btn-img">
                                    <button type="button" class="circle-btn">Load Score</button>
                                </div>
                            </div>
                        </div>
                        <div class="row mt-4">
                            <div class="col-lg-4 col-md-4 col-sm-12 mt-3">
                                <div class="btn-img">
                                    <button type="button" class="circle-btn">Load Score</button>
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-12 mt-3">
                                <div class="btn-img">
                                    <button type="button" class="circle-btn">Load Score</button>
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-4 col-sm-12 mt-3">
                                <div class="btn-img">
                                    <button type="button" class="circle-btn">Load Score</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


    </div>
    <form method="POST" action="/visualization" id="form2">
        {% csrf_token %}
        <input type="text" name="mappings" id="mappings" style="display: none;">
        <input type="text" name="file_name" id="file_name" style="display: none;">
    </form>

    <script src="/static/js/jquery-3.5.1.slim.min.js"></script>
    <script src="/static/js/popper.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>


    <script>
   var obj = {};       
        $(document).ready(function(){
            $("#mapButton").click(function(){
                $("#mapData").show();
            });

            /* Add data*/
            $('#add_map_data_row_form').submit(function() {
                // get all the inputs into an array.
                var $inputs = $('#add_map_data_row_form :input');
                // not sure if you wanted this, but I thought I'd add it.
                // get an associative array of just the values.
                
             var values = {};
                $inputs.each(function() {
                    values[this.name] = $(this).val();
                });
                if(values.select_field !== null){
                    obj[values.select_field] = values.select_type;

                
                $("select#slct_field :selected").attr("disabled",true)
                $("#map_data_table").append(`
                    <tr class="d-flex white-space">
                        <td class="filterable-cell">${values.select_field}</td>
                        <td class="filterable-cell"><img src="/static/images/arrow.png"></td>
                        <td class="filterable-cell">${values.select_type}</td>
                        <td class="filterable-cell"><button type="button" data-name=${values.select_field} class="btn btn-sm btn-danger map-data-dlt">Delete</button></td>
                    </tr>
                `);
                }
            });
            $(document).on("click",'.map-data-dlt',function(){
                $("select#slct_field option:contains("+$(this).attr("data-name")+")").attr("disabled",false);
                 if(obj[$(this).attr("data-name")] == "Family"){
                     count_fam-- ;
                     if(count_fam == 1){
                        document.getElementById("error").style.display = 'block' 
                     }
                     else{
                     document.getElementById("error").style.display = 'none'  
                     }
                 }
                delete obj[$(this).attr("data-name")];
                $(this).parent().parent().remove();
            });
            $("#file_btn").click(function(){
                var elem = $("#theFile");
                elem.click();
            });
            $("#theFile").change(function(){
                var id = Math.round(new Date().getTime() + Math.random());
                document.getElementById("random_name").value = id
 document.getElementById("form").submit();
            })
        });
        // console.log({{elem|safe}})
        var labels = []
   var data_heat=[];
    var arr = []
    var data = {{corr_data|safe}}
    var count_fam = 0;

    Object.keys(data).forEach(function(key) {
    labels.push(key);
     arr = [];
    Object.keys(data[key]).forEach(function(key2) {
    arr.push(data[key][key2]);
    })
    data_heat.push(arr)
    })

        var data = [
  {
    z: data_heat,
    x: labels,
    y: labels,
     type: 'heatmap',
     
  }
];
var config = {responsive: true,displayModeBar: false}
var layout = {
  title: 'Heat Map',
  yaxis: {
    automargin: true
  },
     plot_bgcolor:"#1056c7",
      paper_bgcolor:"#1056c7",
      font: {
    color: 'white'
  }
};
Plotly.newPlot('heatmap', data,layout,config);

var data_count =  {{data_types_dict_count|safe}};
   
 Object.keys(data_count).forEach(function(key) {
     $("#data_count").append(`
     <div class="summary-content">
                                <div class="summary-data">
                                    <p>`+key+`</p>
                                </div>
                                <div class="summary-data">
                                    <p>`+data_count[key]+`</p>
                                </div>
                            </div>
     `)

 })


 var csv =  {{top_rows|safe}};
var counter = 0;
Object.keys(csv).forEach(function(key) {
    $("#table_heading").append(`<th class="tbl-heading" scope="col">`+key+`</th>`)
    $("#table_body").append(`<tr class="d-flex white-space" id=row`+counter+`></tr>`)
    counter++;
})
counter = 0;
Object.keys(csv).forEach(function(key) {
    Object.keys(csv[key]).forEach(function(key2) {
$("#row"+counter).append(`<td class="tbl-data">`+csv[key][key2]+`</td>`)
counter++;
if(counter == 10){
    counter =0;
}
    })
})

var array_col =  {{column_names|safe}}
array_col.forEach(function(elem){
$("#slct_field").append("<option value="+elem+">"+elem+"</option>")
document.querySelectorAll(".slct_table").forEach(function(item){
    $(item).append("<option value="+elem+">"+elem+"</option>")
})
})
// console.log({{file_name|safe}})

function values_box(){
    count_fam = 0;
    Object.keys(obj).forEach(function(key) {
     if(obj[key]=="Family"){
         count_fam ++;
     }
    })
    if(count_fam == 1){
       document.getElementById("error").style.display = 'block'     
     count_fam = 0;
     }
     else{
        document.getElementById("error").style.display = 'none'  
       document.getElementById("mappings").value = JSON.stringify(obj);
       document.getElementById("file_name").value = {{file_name|safe}}
       console.log( document.getElementById("mappings").value, document.getElementById("file_name").value)
       document.getElementById('form2').submit();
            }
}
var temp_row = 0;
var table_data = {{field_summary|safe}}
    console.log(table_data)
    function table_change(val){
   console.log(val.getAttribute('data-name'))
   console.log(val.value)
   $("#table"+val.getAttribute('data-name')).html("")
   
   Object.keys(table_data[val.value]).forEach(function(key) {
    // console.log(table_data[val.value][key])
  $("#table"+val.getAttribute('data-name')).append("<tr id=row_temp"+temp_row+"><tr>")
  $("#row_temp"+temp_row).append("<td>"+key+"</td>")
  $("#row_temp"+temp_row).append("<td>"+table_data[val.value][key]+"</td>")
  temp_row++;
   
   })   
    }

    </script>

{% if field1_agg %}
<script>

var data_charts= {{field1_agg|safe}}
var data_charts2= {{field2_agg|safe}}
var data_charts3= {{field3_agg|safe}}
var data_new = {{field6_agg|safe}}
var data_new2 = {{field7_agg|safe}}
var data_new3 = {{field8_agg|safe}}
var parent1 = [];
var child1 = [];
var grandchild1 =[]
var parent3 = [];
var child3 = [];
var grandchild3 =[]
console.log(data_new2)

 for(var i = 0;i<data_new.length;i++){
        for(var j = 0;j<data_new[i].length;j++){
         if(j == 0){
            if(parent1.indexOf(data_new[i][j]) == -1)
               {
                 parent1.push(data_new[i][j])
               }
         }
         else if(j == 1){
             if(child1.indexOf(data_new[i][j]) == -1)
               {
                 child1.push(data_new[i][j])
               }
         }
           
     }
 }

 for(var i = 0;i<data_new3.length;i++){
        for(var j = 0;j<data_new3[i].length;j++){
         if(j == 0){
            if(parent3.indexOf(data_new3[i][j]) == -1)
               {
                 parent3.push(data_new3[i][j])
               }
         }
         else if(j == 1){
             if(child3.indexOf(data_new3[i][j]) == -1)
               {
                 child3.push(data_new3[i][j])
               }
         }
           
     }
 }

 for (var  i = 0 ;i<parent1.length;i++){
     var temp = [];
for(var j= i ; j<data_new.length ; j+=child1.length){
  temp.push(data_new[j][2])
}
grandchild1.push(temp)
 }

 for (var  i = 0 ;i<parent3.length;i++){
     var temp = [];
for(var j= i ; j<data_new3.length ; j+=child3.length){
  temp.push(data_new3[j][2])
}
grandchild3.push(temp)
 }
    var pie_1x=[]
    var pie_1y=[];
    var pie_2x=[]
    var pie_2y=[];
    var pie_3x=[]
    var pie_3y=[];

    Object.keys(data_charts).forEach(function(key) {
      pie_1x.push(key)
      pie_1y.push(data_charts[key])
    })   
    Object.keys(data_charts2).forEach(function(key) {
      pie_2x.push(key)
      pie_2y.push(data_charts2[key])
    })   
    Object.keys(data_charts3).forEach(function(key) {
      pie_3x.push(key)
      pie_3y.push(data_charts3[key])
    })   
    var data = [{
  values: pie_1y,
  labels: pie_1x,
  type: 'pie',
  
}];

var layout= {
      plot_bgcolor:"#262c37",
      paper_bgcolor:"#262c37",
      font: {
    color: 'white'
  }
}

var config = {responsive: true,displayModeBar: false}
Plotly.newPlot('piechart1',data,layout,config);

var data = [
  {
    x: pie_1x,
    y: pie_1y,
    type: 'bar'
  }
];
var config = {responsive: true,displayModeBar: false}
var layout= {
      plot_bgcolor:"#262c37",
      paper_bgcolor:"#262c37",
      font: {
    color: 'white'
  }
}

Plotly.newPlot('barchart1', data,layout,config);

var data = [{
  type: 'bar',
  x: pie_1x,
  y: pie_1y,
  orientation: 'h'
}];
var config = {responsive: true,displayModeBar: false}
var layout= {
      plot_bgcolor:"#262c37",
      paper_bgcolor:"#262c37",
      font: {
    color: 'white'
  }
}
Plotly.newPlot('horbarchart1', data,layout,config);


var data = [{
  values: pie_2y,
  labels: pie_2x,
  type: 'pie',
  
}];

var layout= {
      plot_bgcolor:"#262c37",
      paper_bgcolor:"#262c37",
      font: {
    color: 'white'
  }
}

var config = {responsive: true,displayModeBar: false}
Plotly.newPlot('piechart2',data,layout,config);


var data = [
  {
    x: pie_2x,
    y: pie_2y,
    type: 'bar'
  }
];
var config = {responsive: true,displayModeBar: false}
var layout= {
      plot_bgcolor:"#262c37",
      paper_bgcolor:"#262c37",
      font: {
    color: 'white'
  }
}

Plotly.newPlot('barchart2', data,layout,config);

var data = [{
  type: 'bar',
  x: pie_2x,
  y: pie_2y,
  orientation: 'h'
}];
var config = {responsive: true,displayModeBar: false}
var layout= {
      plot_bgcolor:"#262c37",
      paper_bgcolor:"#262c37",
      font: {
    color: 'white'
  }
}
Plotly.newPlot('horbarchart2', data,layout,config);

var data = [{
  values: pie_3y,
  labels: pie_3x,
  type: 'pie',
  
}];

var layout= {
      plot_bgcolor:"#262c37",
      paper_bgcolor:"#262c37",
      font: {
    color: 'white'
  }
}

var config = {responsive: true,displayModeBar: false}
Plotly.newPlot('piechart3',data,layout,config);



var data = [
  {
    x: pie_3x,
    y: pie_3y,
    type: 'bar'
  }
];
var config = {responsive: true,displayModeBar: false}
var layout= {
      plot_bgcolor:"#262c37",
      paper_bgcolor:"#262c37",
      font: {
    color: 'white'
  }
}

Plotly.newPlot('barchart3', data,layout,config);

var data = [{
  type: 'bar',
  x: pie_3x,
  y: pie_3y,
  orientation: 'h'
}];
var config = {responsive: true,displayModeBar: false}
var layout= {
      plot_bgcolor:"#262c37",
      paper_bgcolor:"#262c37",
      font: {
    color: 'white'
  }
}
Plotly.newPlot('horbarchart3', data,layout,config);


// var data = [{
//   values: pie_4y,
//   labels: pie_4x,
//   type: 'pie',
  
// }];

// var layout= {
//       plot_bgcolor:"#262c37",
//       paper_bgcolor:"#262c37",
//       font: {
//     color: 'white'
//   }
// }

// var config = {responsive: true}
// Plotly.newPlot('piechart4',data,layout,config);

  
// var ctx = document.getElementById('piechart4').getContext('2d');
// var Data = {
//     labels: pie_4x,
//     datasets: [
//         {
//             data: pie_4y,
//             backgroundColor: [
//                 "#FF6384",
//                 "#63FF84",
//                 "#84FF63",
//                 "red"
//             ]
//         }]
// };

// var myPieChart = new Chart(ctx, {
//     type: 'pie',
//     data: Data,
// }); 
// var data = [
//   {
//     x: pie_4x,
//     y: pie_4y,
//     type: 'bar'
//   }
// ];
// var config = {responsive: true}
// var layout= {
//       plot_bgcolor:"#262c37",
//       paper_bgcolor:"#262c37",
//       font: {
//     color: 'white'
//   }
// }

// Plotly.newPlot('barchart4', data,layout,config);

// var data = [{
//   type: 'bar',
//   x: pie_4x,
//   y: pie_4y,
//   orientation: 'h'
// }];
// var config = {responsive: true}
// var layout= {
//       plot_bgcolor:"#262c37",
//       paper_bgcolor:"#262c37",
//       font: {
//     color: 'white'
//   }
// }
// Plotly.newPlot('horbarchart4', data,layout,config);

// var data = [{
//   values: pie_5y,
//   labels: pie_5x,
//   type: 'pie',
  
// }];

// var layout= {
//       plot_bgcolor:"#262c37",
//       paper_bgcolor:"#262c37",
//       font: {
//     color: 'white'
//   },
  
// }

// var config = {responsive: true}
// Plotly.newPlot('piechart5',data,layout,config);
    
// var ctx = document.getElementById('piechart5').getContext('2d');
// var Data = {
//     labels: pie_5x,
//     datasets: [
//         {
//             data: pie_5y,
//             backgroundColor: [
//                 "#FF6384",
//                 "#63FF84",
//                 "#84FF63",
//                 "red",
//                 "yellow",
//                 "blue"
//             ]
//         }]
// };

// var myPieChart = new Chart(ctx, {
//     type: 'pie',
//     data: Data,
// });

// var data = [
//   {
//     x: pie_5x,
//     y: pie_5y,
//     type: 'bar'
//   }
// ];
// var config = {responsive: true}
// var layout= {
//       plot_bgcolor:"#262c37",
//       paper_bgcolor:"#262c37",
//       font: {
//     color: 'white'
//   }
// }

// Plotly.newPlot('barchart5', data,layout,config);

// var data = [{
//   type: 'bar',
//   x: pie_5x,
//   y: pie_5y,
//   orientation: 'h'
// }];
// var config = {responsive: true}
// var layout= {
//       plot_bgcolor:"#262c37",
//       paper_bgcolor:"#262c37",
//       font: {
//     color: 'white'
//   }
// }
// Plotly.newPlot('horbarchart5', data,layout,config);




var traces1 = []
for (var i =0 ; i<parent1.length;i++){
    var obj ={
        x: child1,
  y: grandchild1[i],
  name: parent1[i],
  type: 'bar'       
    }
    traces1.push(obj)
}


var data = traces1;

var layout = {barmode: 'stack', plot_bgcolor:"#262c37",
       paper_bgcolor:"#262c37",
       font: {
     color: 'white'}
};

Plotly.newPlot('stackchart1', data, layout, {displayModeBar: false});


var traces3 = []
for (var i =0 ; i<parent3.length;i++){
    var obj ={
        x: child3,
  y: grandchild3[i],
  name: parent3[i],
  type: 'bar'       
    }
    traces3.push(obj)
}


var data = traces3;

var layout = {barmode: 'stack', plot_bgcolor:"#262c37",
       paper_bgcolor:"#262c37",
       font: {
     color: 'white'}
};

Plotly.newPlot('stackchart3', data, layout, {displayModeBar: false});

traces1=[]
for (var i =0 ; i<parent1.length;i++){
    var obj ={
        x: grandchild1[i],
  y: child1,
  name: parent1[i],
  orientation: 'h',
  type: 'bar'       
    }
    traces1.push(obj)
}


var data = traces1;

var layout = {barmode: 'stack', plot_bgcolor:"#262c37",
       paper_bgcolor:"#262c37",
       font: {
     color: 'white'}
};

Plotly.newPlot('horstackchart1', data, layout, {displayModeBar: false});
traces3=[]
for (var i =0 ; i<parent3.length;i++){
    var obj ={
        x: grandchild3[i],
  y: child3,
  name: parent3[i],
  orientation: 'h',
  type: 'bar'       
    }
    traces3.push(obj)
}


var data = traces3;

var layout = {barmode: 'stack', plot_bgcolor:"#262c37",
       paper_bgcolor:"#262c37",
       font: {
     color: 'white'}
};

Plotly.newPlot('horstackchart3', data, layout, {displayModeBar: false});


 </script>
{% endif %}
</body>
</html>